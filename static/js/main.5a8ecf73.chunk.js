(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{46:function(e,t,n){e.exports=n(75)},50:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(42),s=n.n(r),c=(n(50),n(1)),l=n(2),i=n(5),u=n(4),d=n(6),m=n(14),h=n(15),g=n(9),b=n.n(g),p="http://localhost:8081",f=new(function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"executeBasicAuthenticationService",value:function(e,t){return b.a.get("".concat(p,"/basicauth"),{headers:{authorization:this.createBasicAuthToken(e,t)}})}},{key:"executeJwtAuthenticationService",value:function(e,t){return b.a.post("".concat(p,"/authenticate"),{username:e,password:t})}},{key:"createBasicAuthToken",value:function(e,t){return"Basic "+window.btoa(e+":"+t)}},{key:"createJWTToken",value:function(e){return"Bearer "+e}},{key:"registerSuccessfullLogin",value:function(e,t){sessionStorage.setItem("authenticateUser",e),sessionStorage.setItem("authenticatePassword",t),this.setupAxiosInterceptors(this.createBasicAuthToken(e,t))}},{key:"logout",value:function(){sessionStorage.removeItem("authenticateUser"),sessionStorage.removeItem("authenticatePassword")}},{key:"isUserLoggedIn",value:function(){return null!=sessionStorage.getItem("authenticateUser")}},{key:"getLoggedInUserName",value:function(){var e=sessionStorage.getItem("authenticateUser");return null==e?"":e}},{key:"setupAxiosInterceptors",value:function(e){var t=this;b.a.interceptors.request.use((function(n){return t.isUserLoggedIn()&&(n.headers.authorization=e),n}))}},{key:"checkInternet",value:function(){return"online"===(navigator.onLine?"online":"offline")}},{key:"createObjectStore",value:function(){if("indexedDB"in window){console.log("Going to create object store");var e=indexedDB.open("todo-app",5);console.log("Starting---"),e.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this),e.onupgradeneeded=function(e){console.log("Call on upgrade needed"),e.target.result.createObjectStore("todo",{keyPath:"USER_ID",autoIncrement:!0}).transaction.oncomplete=function(e){console.log("table creation completed---")}}.bind(this)}else alert("This browser does not support IndexedDB")}},{key:"forceSwUpdate",value:function(){"serviceWorker"in navigator&&(console.log("Going to update service worker------1-------"),navigator.serviceWorker.getRegistrations().then((function(e){console.log("Going to update service worker-------2------");var t=!0,n=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;console.log("Going to update service worker hurrey-------"),s.update()}}catch(c){n=!0,a=c}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}})))}}]),e}()),v=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return f.isUserLoggedIn()?o.a.createElement(h.b,this.props):o.a.createElement(h.a,{to:"/login"})}}]),t}(a.Component),E=n(25),k=n(3),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={username:"anchal",password:"",hasLoginFailed:!1,showSuccessMessage:!1},n.handleChange=n.handleChange.bind(Object(k.a)(n)),n.loginClicked=n.loginClicked.bind(Object(k.a)(n)),n.forgotPasswordClicked=n.forgotPasswordClicked.bind(Object(k.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){console.log(e.target.value),this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"forgotPasswordClicked",value:function(){f.checkInternet()?(console.log("online---"),this.props.history.push("/forgotPassword")):alert("You are offline.")}},{key:"loginClicked",value:function(){window,null!=this.state.username&&""!=this.state.username&&null!=this.state.password&&""!=this.state.password?(f.registerSuccessfullLogin(this.state.username,this.state.password),this.props.history.push("/welcome/".concat(this.state.username))):alert("Please enter username & password")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Login"),o.a.createElement("div",{className:"container"},this.state.hasLoginFailed&&o.a.createElement("div",{className:"alert alert-warning"},"Login failed"),o.a.createElement("br",null),"Username : ",o.a.createElement("input",{type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement("br",null),"Password : ",o.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-success myBtn",onClick:this.loginClicked},"Login"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-success myBtn",onClick:this.forgotPasswordClicked},"Forgot Password"),o.a.createElement("br",null),"Ver. 1.015"))}}]),t}(a.Component),w=new(function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"retrieveAllTodos",value:function(e){return console.log("executed service 3"),b.a.get("".concat(p,"/users/").concat(e,"/todos"))}},{key:"retrieveTodo",value:function(e,t){return console.log("executed service 4"),b.a.get("".concat(p,"/users/").concat(e,"/todos/").concat(t))}},{key:"deleteTodo",value:function(e,t){return console.log("executed service 5"),b.a.delete("".concat(p,"/users/").concat(e,"/todos/").concat(t))}},{key:"updateTodo",value:function(e,t,n){return console.log("executed service 6"),b.a.put("".concat(p,"/users/").concat(e,"/todos/").concat(t),n)}},{key:"createTodo",value:function(e,t){return console.log("executed service 7"),b.a.post("".concat(p,"/users/").concat(e,"/todos/"),t)}},{key:"login",value:function(e,t){return console.log("executed service 8"),b.a.get("http://localhost:8081/users/".concat(e,"/").concat(t,"/"))}}]),e}()),j=n(21),D=n.n(j),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={todos:[],message:null,todos1:[]},n.deleteTodoClicked=n.deleteTodoClicked.bind(Object(k.a)(n)),n.updateTodoClicked=n.updateTodoClicked.bind(Object(k.a)(n)),n.addTodoClicked=n.addTodoClicked.bind(Object(k.a)(n)),n.fetchIndexDBList=n.fetchIndexDBList.bind(Object(k.a)(n)),n.change=n.change.bind(Object(k.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"change",value:function(e){this.setState({obj:e})}},{key:"componentDidMount",value:function(){this.fetchIndexDBList()}},{key:"refreshTodos",value:function(){var e=this,t=f.getLoggedInUserName();w.retrieveAllTodos(t).then((function(t){e.setState({todos:t.data})}))}},{key:"updateTodoClicked",value:function(e){console.log("inside todo clicked"),this.props.history.push("/todos/".concat(e))}},{key:"fetchIndexDBList",value:function(){if("indexedDB"in window){var e=[],t=indexedDB.open("todo-app",5);t.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this);t.onsuccess=function(t){var n=t.target.result.transaction("todo").objectStore("todo").getAll();n.onsuccess=function(t){e=n.result,this.setState({todos1:e})}.bind(this),n.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this)}.bind(this)}else alert("This browser does not support IndexedDB")}},{key:"deleteTodoClicked",value:function(e){if(console.log("delete todo clicked---"+e),window.confirm("Are you sure you want to delete?")){if("indexedDB"in window){var t,n=indexedDB.open("todo-app",5);n.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this),n.onsuccess=function(n){(t=n.target.result).transaction("todo","readwrite").objectStore("todo").delete(e).onsuccess=function(e){var n=t.transaction("todo","readwrite").objectStore("todo").getAll();n.onsuccess=function(e){this.setState({todos1:n.result})}.bind(this)}.bind(this)}.bind(this),n.onupgradeneeded=function(e){e.target.result.createObjectStore("todo",{keyPath:"USER_ID",autoIncrement:!0}).transaction.oncomplete=function(e){}}}else alert("This browser does not support IndexedDB");f.getLoggedInUserName()}}},{key:"addTodoClicked",value:function(e){this.props.history.push("/todos/-1")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"List todos"),this.state.message&&o.a.createElement("div",{className:"alert alert-success"},this.state.message),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("button",{className:"btn btn-success",onClick:this.addTodoClicked},"Add Todo"))),o.a.createElement("div",{className:"container"},o.a.createElement("table",{className:"table table-bordered"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"ID"),o.a.createElement("th",null,"Description"),o.a.createElement("th",null,"Target Date"),o.a.createElement("th",null,"Update"),o.a.createElement("th",null,"Delete"))),o.a.createElement("tbody",{id:"todoList"},this.state.todos1.map((function(t){return o.a.createElement("tr",{key:t.USER_ID},o.a.createElement("td",null,t.USER_ID),o.a.createElement("td",null,t.description),o.a.createElement("td",null,D()(t.targetDate).format("YYYY-MM-DD")),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.updateTodoClicked(t.USER_ID)}},"Update")),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.deleteTodoClicked(t.USER_ID)}},"Delete")))}))))))}}]),t}(a.Component),I=(new(function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"executeHelloWorldService",value:function(){return console.log("executed service 1"),b.a.get("http://localhost:8081/hello-world")}},{key:"executeHelloWorldBeanService",value:function(){return console.log("executed service 2"),b.a.get("http://localhost:8081/hello-world-bean")}},{key:"executeHelloWorldPathVariableService",value:function(e){return console.log("executed service 3"),b.a.get("http://localhost:8081/hello-world/path-variable/".concat(e))}}]),e}()),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={welcomeMessage:""},n.retrieveWelcomeMessage=n.retrieveWelcomeMessage.bind(Object(k.a)(n)),n.handleSuccessfulResponse=n.handleSuccessfulResponse.bind(Object(k.a)(n)),n.handleError=n.handleError.bind(Object(k.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Welcome!"),o.a.createElement("div",{className:"container"},"Welcome ",this.props.match.params.name,".You can manage your todos ",o.a.createElement(m.b,{to:"/todos"},"here")),o.a.createElement("div",{className:"container"},this.state.welcomeMessage))}},{key:"retrieveWelcomeMessage",value:function(){}},{key:"handleSuccessfulResponse",value:function(e){this.setState({welcomeMessage:e.data.message})}},{key:"handleError",value:function(e){console.log("-----------\x3e"+e.response);var t="";e.message&&(t+=e.message),e.response&&e.response.data&&(t+=e.response.data.message),this.setState({welcomeMessage:t})}}]),t}(a.Component)),C=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=f.isUserLoggedIn();return o.a.createElement("header",null,o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},o.a.createElement("div",null,o.a.createElement("a",{href:"http://www.altius.cc",className:"navbar-brand"},o.a.createElement("img",{src:"logo.png",alt:"..."}))),o.a.createElement("ul",{className:"navbar-nav"},e&&o.a.createElement("li",null,o.a.createElement(m.b,{className:"nav-link",to:"/welcome/anchal"},"Home")),e&&o.a.createElement("li",null,o.a.createElement(m.b,{className:"nav-link",to:"/todos"},"Todos"))),o.a.createElement("ul",{className:"navbar-nav navbar-collapse justify-content-end"},!e&&o.a.createElement("li",null,o.a.createElement(m.b,{className:"nav-link",to:"/login"},"Login")),e&&o.a.createElement("li",null,o.a.createElement(m.b,{className:"nav-link",to:"/logout",onClick:f.logout},"Logout")))))}}]),t}(a.Component),S=Object(h.g)(C),x=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("span",{className:"text-muted"},"All rights reserved 2019 @altius"))}}]),t}(a.Component),B=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"You are logged out. "),o.a.createElement("div",{className:"container"},"Thank you for using our application"))}}]),t}(a.Component),N=n(20),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={id:n.props.match.params.id,USER_ID:n.props.match.params.id,description:"",targetDate:D()(new Date).format("YYYY-MM-DD")},n.onSubmit=n.onSubmit.bind(Object(k.a)(n)),n.goBack=n.goBack.bind(Object(k.a)(n)),n.getIndexedDBDataById=n.getIndexedDBDataById.bind(Object(k.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"goBack",value:function(){this.props.history.push("/todos")}},{key:"onSubmit",value:function(e){var t={id:this.state.id,description:e.description,targetDate:e.targetDate};console.log(e);f.getLoggedInUserName();if(console.log("on submit called"),console.log("id---*******"+this.state.id),"-1"===this.state.id){if(console.log("outside if"),"indexedDB"in window){(n=indexedDB.open("todo-app",5)).onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")};n.onsuccess=function(e){e.target.result.transaction("todo","readwrite").objectStore("todo").add(t)},n.onupgradeneeded=function(e){var n=e.target.result,a=n.createObjectStore("todo",{keyPath:"USER_ID",autoIncrement:!0});a.createIndex("USER_ID","USER_ID",{unique:!0}),a.transaction.oncomplete=function(e){n.transaction("todo","readwrite").objectStore("todo").add(t)}}}else alert("This browser does not support IndexedDB");this.props.history.push("/todos"),console.log("call api")}else{var n;if(console.log("inside else update"),"indexedDB"in window)(n=indexedDB.open("todo-app",5)).onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")},n.onsuccess=function(t){var n=t.target.result.transaction("todo","readwrite").objectStore("todo"),a=n.get(this.state.id);console.log("id in update---"+this.state.id),console.log("request user id----"+a),a.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this),a.onsuccess=function(t){t.target.result;var a={id:-1,USER_ID:parseInt(e.USER_ID),description:e.description,targetDate:e.targetDate},o=n.put(a);o.onerror=function(e){}.bind(this),o.onsuccess=function(e){}.bind(this)}.bind(this)}.bind(this),n.onupgradeneeded=function(e){var n=e.target.result;n.createObjectStore("todo",{keyPath:"USER_ID",autoIncrement:!0}).transaction.oncomplete=function(e){var a=n.transaction("todo","readwrite").objectStore("todo"),o=a.get(this.state.id);o.onerror=function(e){},o.onsuccess=function(e){var n=a.put(t);n.onerror=function(e){},n.onsuccess=function(e){}}}};else alert("This browser does not support IndexedDB");this.props.history.push("/todos")}}},{key:"componentDidMount",value:function(){"-1"!==this.state.id&&this.getIndexedDBDataById()}},{key:"getIndexedDBDataById",value:function(){var e=indexedDB.open("todo-app",5);e.onerror=function(e){console.error("Database error: "+e.target.errorCode),console.log("Why didn't you allow my web app to use IndexedDB?!")}.bind(this),e.onsuccess=function(e){var t=e.target.result.transaction(["todo"],"readwrite").objectStore("todo").get(parseInt(this.state.USER_ID));t.onerror=function(e){console.log("Error occured while fetching data")}.bind(this),t.onsuccess=function(e){console.log("inside on success"),console.log("---result---"+t.result),this.setState({description:t.result.description,targetDate:D()(t.result.targetDate).format("YYYY-MM-DD")})}.bind(this)}.bind(this)}},{key:"validate",value:function(e){var t={};return e.description?e.description.length<5&&(t.description="Enter atleast 5 character in description"):(t.description="Enter a description",console.log(e)),D()(e.targetDate).isValid()||(t.targetDate="Enter a target date"),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.USER_ID,a=t.description,r=t.targetDate;return o.a.createElement(o.a.Fragment,null,o.a.createElement("br",null),o.a.createElement("h4",null,"Update Todo"),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement(N.d,{initialValues:{USER_ID:n,description:a,targetDate:r},onSubmit:this.onSubmit,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,enableReinitialize:!0},(function(t){return o.a.createElement(N.c,null,o.a.createElement(N.a,{name:"description",component:"div",className:"alert alert-warning"}),o.a.createElement(N.a,{name:"targetDate",component:"div",className:"alert alert-warning"}),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Description"),o.a.createElement(N.b,{className:"form-control",type:"text",name:"description"})),o.a.createElement("fieldset",{className:"form-group"},o.a.createElement("label",null,"Target Date"),o.a.createElement(N.b,{className:"form-control",type:"date",name:"targetDate"})),o.a.createElement("button",{className:"btn btn-success",type:"submit"},"Save"),o.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:e.goBack},"Back"))}))))}}]),t}(a.Component);var U,L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={emailId:""},n.submitClicked=n.submitClicked.bind(Object(k.a)(n)),n.cancelClicked=n.cancelClicked.bind(Object(k.a)(n)),n.handleChange=n.handleChange.bind(Object(k.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){console.log(e.target.value),this.setState(Object(E.a)({},e.target.name,e.target.value))}},{key:"submitClicked",value:function(){f.checkInternet()?null!=this.state.emailId&&""!=this.state.emailId?(sessionStorage.setItem("authenticateEmailId",this.state.emailId),alert("Password changed successfully!!!"),this.props.history.push("/login")):alert("Please enter email id"):alert("You need to be online to change the password.")}},{key:"cancelClicked",value:function(){this.props.history.push("/login")}},{key:"render",value:function(){return o.a.createElement("div",{className:"forgotPassword"},o.a.createElement("br",null),"Email Id ",o.a.createElement("br",null),o.a.createElement("input",{type:"email",name:"emailId",id:"emailId",value:this.state.emailId,onChange:this.handleChange}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-success myBtn",onClick:this.submitClicked},"Submit"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-success myBtn",onClick:this.cancelClicked},"Cancel"))}}]),t}(a.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"TodoApp"},o.a.createElement(m.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(S,null),o.a.createElement(h.d,null,o.a.createElement(h.b,{path:"/",exact:!0,component:y}),o.a.createElement(h.b,{path:"/login",component:y}),o.a.createElement(v,{path:"/welcome/:name",component:I}),o.a.createElement(v,{path:"/todos/:id",component:T}),o.a.createElement(v,{path:"/todos",component:O}),o.a.createElement(v,{path:"/logout",component:B}),o.a.createElement(h.b,{path:"/forgotPassword",component:L}),o.a.createElement(h.b,{component:y})),o.a.createElement(x,null))))}}]),t}(a.Component),R=(n(73),n(74),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(W,null))}}]),t}(a.Component));s.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator?(console.log("register service worker"),navigator.serviceWorker.register("pipelinesw.js").then((function(e){e.addEventListener("updatefound",(function(){(U=e.installing).addEventListener("statechange",(function(){switch(console.log("Inside state change event"),console.log("current state---"+U.state),U.state){case"installed":console.log("controller value---"+navigator.serviceWorker.controller),navigator.serviceWorker.controller&&(console.log("Going to call show update bar method"),alert("New version update available.Please refresh the page to see the changes!!!"),window.location.reload())}}))})),console.log("It worked for me")})).catch((function(e){console.log("Error",e)}))):console.log("service worker already registered"),f.createObjectStore(),f.forceSwUpdate(),console.log("index.js is called---------------------")}},[[46,1,2]]]);
//# sourceMappingURL=main.5a8ecf73.chunk.js.map